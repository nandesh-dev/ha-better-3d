import { Visual } from '@/visual'

import { Checkbox } from './components/checkbox'

export type EditorEditorParameters = {
    visual: Visual | null | undefined
    hotReloadEnabled: boolean
    onHotReloadChange: (newHotReload: boolean) => void
}

export function EditorEditor(parameters: EditorEditorParameters) {
    const { visual, hotReloadEnabled } = parameters

    const changeHotReload = parameters.onHotReloadChange

    return (
        <div class="panel">
            <div class="panel__section">
                <span class="panel__label">HOT RELOAD</span>
                {visual === null && <VisualConnectingMessage />}
                {visual === undefined && <VisualNotFoundWarning />}
                <Checkbox label="Enable" value={hotReloadEnabled} onValueChange={changeHotReload} disabled={!visual} />
                {hotReloadEnabled && <PrecautionMessage />}
            </div>
        </div>
    )
}

function VisualConnectingMessage() {
    return <p class="warning">Connecting to visual...</p>
}

function VisualNotFoundWarning() {
    return (
        <p class="warning">
            Could not connect to visual, you may still (hope so) use visual editor without hot reload. Do report this!
        </p>
    )
}

function PrecautionMessage() {
    return (
        <>
            <p class="warning">
                <b>HEADS UP! You will LOOSE your configuration if you didn't read this.</b>
                <br /> Make sure to save your configuration <b>FIRST</b> using the <b>LEFT</b> save button (below the
                sidebar), <i>then</i> using the save button provided by Home Assistant.
            </p>
            <Graphic />
        </>
    )
}

function Graphic() {
    return (
        <svg xmlns="http://www.w3.org/2000/svg" width="216" height="136" viewBox="0 0 216 136" class="icon">
            <path d="M210.073 119.544C210.624 119.514 211.096 119.938 211.126 120.489C211.156 121.041 210.733 121.512 210.182 121.542L210.128 120.543C210.178 121.464 210.182 121.536 210.182 121.541L210.18 121.542L210.155 121.543C210.138 121.544 210.113 121.545 210.081 121.547C210.017 121.55 209.923 121.554 209.8 121.558C209.554 121.568 209.193 121.58 208.731 121.589C207.805 121.609 206.468 121.619 204.816 121.586C201.513 121.518 196.94 121.272 191.863 120.558C181.755 119.136 169.451 115.832 161.265 108.199C149.512 97.2401 144.586 87.0352 143.744 78.754C134.119 77.2967 123.156 72.532 114.443 63.352C103.62 51.9471 95.5423 31.3227 94.6759 14.1554C94.6483 13.604 95.0735 13.1341 95.625 13.1062C96.1764 13.0786 96.6463 13.5038 96.6741 14.0552C97.5203 30.8199 105.447 50.9674 115.893 61.9753C124.154 70.6801 134.514 75.2406 143.615 76.7095C143.54 73.3236 144.165 70.3044 145.277 67.7423C147.234 63.2389 150.707 60.1839 154.445 59.2346C158.237 58.2716 162.19 59.5153 164.824 63.379C166.279 65.5128 166.994 67.5707 166.977 69.4969C166.96 71.4408 166.197 73.1477 164.888 74.5491C162.316 77.3025 157.654 78.8819 152.154 79.1922C150.154 79.3051 148.017 79.2505 145.791 79.0168C146.704 86.6279 151.333 96.2039 162.629 106.736C170.35 113.937 182.138 117.17 192.143 118.578C197.122 119.278 201.612 119.52 204.857 119.586C206.479 119.619 207.788 119.609 208.689 119.59C209.14 119.58 209.488 119.569 209.723 119.56C209.84 119.556 209.929 119.552 209.988 119.549C210.018 119.547 210.04 119.547 210.054 119.546C210.061 119.546 210.067 119.545 210.07 119.545C210.071 119.545 210.072 119.544 210.073 119.544ZM164.977 69.4798C164.99 68.0722 164.468 66.4069 163.172 64.5054C161.015 61.3419 157.921 60.4143 154.936 61.1723C151.898 61.9442 148.865 64.502 147.112 68.5387C146.096 70.8763 145.514 73.7235 145.631 76.988C147.883 77.2443 150.038 77.3082 152.041 77.1952C157.328 76.8969 161.368 75.3868 163.425 73.1844C164.431 72.1079 164.965 70.8695 164.977 69.4798Z" />
            <path d="M209.793 121.452C210.345 121.444 210.801 121.883 210.81 122.435C210.818 122.953 210.431 123.386 209.928 123.445L209.826 123.452L209.824 123.451C209.824 123.451 209.822 123.452 209.821 123.452C209.818 123.452 209.814 123.452 209.809 123.452C209.798 123.452 209.781 123.453 209.761 123.453C209.719 123.453 209.657 123.454 209.576 123.455C209.414 123.456 209.177 123.457 208.871 123.458C208.259 123.459 207.373 123.456 206.271 123.439C204.067 123.404 200.999 123.312 197.542 123.085C190.654 122.634 182.12 121.639 175.8 119.443C162.917 114.966 154.866 108.054 150.338 100.422C146.431 93.8388 145.182 86.7787 145.656 80.3999C134.107 78.5473 121.083 73.1394 112.192 63.7713C101.435 52.4368 91.7419 36.6285 94.6831 13.9767C94.7542 13.429 95.2566 13.0426 95.8042 13.1137C96.3517 13.185 96.738 13.6864 96.667 14.2339C93.8304 36.0793 103.128 51.3165 113.642 62.3947C122.154 71.364 134.71 76.5984 145.863 78.4081C145.907 78.0813 145.953 77.7566 146.005 77.4344C147.153 70.3639 150.419 64.3189 154.512 61.2026C156.571 59.6352 158.893 58.7718 161.274 58.9906C163.667 59.2106 165.953 60.5086 167.955 62.9397C170.204 65.6716 171.465 68.1918 171.779 70.4801C172.098 72.8134 171.42 74.8288 169.965 76.4391C168.54 78.0173 166.414 79.1606 163.88 79.9214C161.336 80.6852 158.311 81.0854 155.005 81.1285C152.686 81.1588 150.21 81.011 147.642 80.6848C147.222 86.6601 148.409 93.253 152.058 99.4019C156.309 106.566 163.946 113.207 176.457 117.555C182.506 119.657 190.812 120.639 197.673 121.089C201.089 121.313 204.123 121.404 206.302 121.439C207.391 121.456 208.266 121.459 208.868 121.458C209.169 121.458 209.401 121.456 209.558 121.455C209.636 121.454 209.696 121.453 209.735 121.452C209.755 121.452 209.77 121.453 209.78 121.453C209.784 121.453 209.788 121.452 209.79 121.452L209.793 121.452ZM169.797 70.752C169.553 68.968 168.532 66.786 166.412 64.2104C164.668 62.0924 162.837 61.1431 161.091 60.9825C159.334 60.821 157.497 61.4439 155.724 62.7934C152.154 65.5116 149.07 71.0259 147.978 77.7546C147.928 78.0658 147.884 78.3798 147.842 78.6956C150.332 79.0138 152.732 79.1577 154.979 79.1284C158.151 79.087 160.982 78.7023 163.304 78.0053C165.636 77.3052 167.387 76.3106 168.482 75.0986C169.548 73.9188 170.036 72.4911 169.797 70.752Z" />
            <path d="M187.829 135.886C187.337 136.137 186.735 135.943 186.483 135.451C186.231 134.96 186.426 134.357 186.917 134.105L211.573 121.482L187.705 109.143C187.214 108.89 187.021 108.286 187.275 107.796C187.529 107.305 188.132 107.113 188.623 107.367L215.944 121.491L187.829 135.886Z" />
            <path d="M189.883 132.845C189.381 133.073 188.788 132.85 188.56 132.348C188.331 131.845 188.553 131.251 189.056 131.023L209.717 121.638L183.425 110.633C182.916 110.42 182.675 109.834 182.888 109.325C183.102 108.816 183.688 108.575 184.197 108.788L214.717 121.565L189.883 132.845Z" />
            <path d="M187.764 134.274C187.264 134.51 186.668 134.298 186.432 133.798C186.196 133.299 186.409 132.703 186.909 132.466L209.823 121.627L186.528 111.234C186.024 111.009 185.797 110.418 186.022 109.914C186.247 109.41 186.839 109.184 187.343 109.409L214.612 121.575L187.764 134.274Z" />
            <path d="M68.4886 20.5338C68.8083 20.0837 69.4321 19.9774 69.8823 20.297C70.3325 20.6168 70.4386 21.2414 70.1189 21.6917C54.6519 43.4639 27.4504 53.636 3.4509 56.1211C2.90167 56.1779 2.41015 55.7791 2.35323 55.2299C2.29635 54.6805 2.69608 54.1894 3.24542 54.1325C26.9414 51.6787 53.4846 41.6543 68.4886 20.5338Z" />
            <path d="M68.4884 20.5337C68.8083 20.0835 69.4329 19.9774 69.8831 20.2972C70.3333 20.6171 70.4385 21.2414 70.1187 21.6916C54.6919 43.4074 31.7293 54.5223 7.64094 57.0166C7.09176 57.0734 6.60024 56.6746 6.54328 56.1254C6.48639 55.576 6.88612 55.0849 7.43547 55.028C31.0425 52.5834 53.4444 41.7106 68.4884 20.5337Z" />
            <path d="M21.1355 36.769L2.47463 55.0126C1.91932 55.5555 2.16777 56.4965 2.91869 56.6946L28.284 63.3839C29.138 63.6092 29.8459 62.6916 29.4294 61.9128C23.8949 51.5652 23.0615 45.8312 22.8447 37.4708C22.822 36.5931 21.7634 36.1552 21.1355 36.769Z" />
            <path d="M128.179 34.5991C128.147 34.5991 128.123 34.5591 128.107 34.4791C128.059 34.2391 127.923 34.0151 127.699 33.8071C127.491 33.6151 127.227 33.4871 126.907 33.4231C126.507 33.3271 126.019 33.2791 125.443 33.2791C124.755 33.2791 124.011 33.3351 123.211 33.4471C122.411 33.5431 121.635 33.6471 120.883 33.7591C120.147 33.8871 119.507 33.9831 118.963 34.0471C118.867 34.2231 118.659 34.3111 118.339 34.3111C118.275 34.3111 118.211 34.3111 118.147 34.3111C118.099 34.3111 118.035 34.3031 117.955 34.2871C117.827 34.2551 117.731 34.1751 117.667 34.0471C117.603 33.9191 117.555 33.7991 117.523 33.6871C117.475 33.5111 117.451 33.3431 117.451 33.1831C117.451 32.8151 117.627 32.4631 117.979 32.1271C118.683 31.4391 119.299 30.8311 119.827 30.3031C120.355 29.7751 120.835 29.2791 121.267 28.8151C121.699 28.3351 122.107 27.8471 122.491 27.3511C122.891 26.8391 123.307 26.2711 123.739 25.6471C124.171 25.0231 124.651 24.2951 125.179 23.4631C125.499 22.9831 125.771 22.3991 125.995 21.7111C126.219 21.0231 126.331 20.3831 126.331 19.7911C126.331 19.2471 126.211 18.7991 125.971 18.4471C125.747 18.0791 125.331 17.8951 124.723 17.8951H124.603C124.123 17.8951 123.579 18.0551 122.971 18.3751C122.363 18.6951 121.779 19.0951 121.219 19.5751C120.659 20.0551 120.195 20.5511 119.827 21.0631C119.475 21.5751 119.299 22.0231 119.299 22.4071C119.299 22.6471 119.379 22.8471 119.539 23.0071C119.603 23.0711 119.635 23.1271 119.635 23.1751C119.635 23.2231 119.603 23.2471 119.539 23.2471C119.475 23.2471 119.387 23.2151 119.275 23.1511C119.163 23.0871 119.003 22.9271 118.795 22.6711C118.603 22.4151 118.427 22.1351 118.267 21.8311C118.107 21.5271 118.027 21.2711 118.027 21.0631V20.9431C118.091 20.6711 118.299 20.3191 118.651 19.8871C119.019 19.4391 119.443 19.0391 119.923 18.6871C120.691 18.1271 121.443 17.7191 122.179 17.4631C122.931 17.1911 123.635 17.0551 124.291 17.0551C125.075 17.0551 125.763 17.2151 126.355 17.5351C126.963 17.8551 127.435 18.2951 127.771 18.8551C128.123 19.4151 128.299 20.0631 128.299 20.7991C128.299 21.4231 128.147 22.1031 127.843 22.8391C127.555 23.5591 127.083 24.2951 126.427 25.0471C125.643 25.9431 124.835 26.7431 124.003 27.4471C123.171 28.1511 122.355 28.8631 121.555 29.5831C120.755 30.2871 120.003 31.1031 119.299 32.0311C119.203 32.1271 119.139 32.2551 119.107 32.4151C119.587 32.3671 120.123 32.3111 120.715 32.2471C121.307 32.1671 121.907 32.0951 122.515 32.0311C123.123 31.9511 123.675 31.8951 124.171 31.8631C124.683 31.8151 125.083 31.7911 125.371 31.7911H125.779C126.211 31.7911 126.643 31.8151 127.075 31.8631C127.507 31.9111 127.859 32.0391 128.131 32.2471C128.419 32.4551 128.563 32.7991 128.563 33.2791C128.563 33.3431 128.563 33.4071 128.563 33.4711C128.563 33.5191 128.555 33.5751 128.539 33.6391C128.443 34.2791 128.323 34.5991 128.179 34.5991Z" />
            <path d="M57.9354 69.7371C57.4234 69.7371 57.1674 68.9211 57.1674 67.2891C57.1674 67.1931 57.1674 67.0971 57.1674 67.0011C57.1834 66.8891 57.1914 66.7771 57.1914 66.6651C57.2554 65.1451 57.3594 63.6331 57.5034 62.1291C57.6474 60.6251 57.7754 59.1131 57.8874 57.5931C57.9034 57.3531 57.9114 57.1131 57.9114 56.8731C57.9274 56.6331 57.9354 56.4091 57.9354 56.2011C57.4874 56.7451 56.9754 57.2731 56.3994 57.7851C55.8234 58.2971 55.2314 58.6971 54.6234 58.9851C54.5914 59.0011 54.5434 59.0091 54.4794 59.0091C54.3674 59.0091 54.2554 58.9771 54.1434 58.9131C54.0474 58.8491 53.9994 58.7771 53.9994 58.6971C53.9994 58.6171 54.0554 58.5451 54.1674 58.4811C54.5034 58.2731 54.9034 57.9531 55.3674 57.5211C55.8314 57.0731 56.2714 56.5691 56.6874 56.0091C57.1194 55.4491 57.4314 54.9131 57.6234 54.4011C57.5594 54.3211 57.5274 54.2171 57.5274 54.0891C57.5274 53.8811 57.6154 53.7211 57.7914 53.6091C58.0474 53.4331 58.3114 53.2811 58.5834 53.1531C58.8714 53.0091 59.0154 52.9371 59.0154 52.9371C59.2714 52.9371 59.4634 53.0651 59.5914 53.3211C59.7354 53.5611 59.8074 53.8651 59.8074 54.2331C59.8074 54.3291 59.8074 54.4251 59.8074 54.5211C59.8074 54.6171 59.7914 54.7131 59.7594 54.8091C59.6634 55.2731 59.5834 55.7371 59.5194 56.2011C59.4554 56.6651 59.3914 57.1291 59.3274 57.5931C59.2154 58.5051 59.1194 59.5131 59.0394 60.6171C58.9754 61.7051 58.9434 62.7611 58.9434 63.7851C58.9434 64.6971 58.9754 65.5371 59.0394 66.3051C59.1034 67.0571 59.1994 67.6651 59.3274 68.1291C59.4714 68.5771 59.6554 68.8011 59.8794 68.8011C59.8794 69.0091 59.7434 69.1851 59.4714 69.3291C59.2154 69.4571 58.9354 69.5531 58.6314 69.6171C58.3274 69.6971 58.0954 69.7371 57.9354 69.7371Z" />
        </svg>
    )
}
