import { Visual } from '@/visual'

import { Checkbox } from './components/checkbox'

export type EditorEditorParameters = {
    visual: Visual | null | undefined
    hotReloadEnabled: boolean
    onHotReloadChange: (newHotReload: boolean) => void
}

export function EditorEditor(parameters: EditorEditorParameters) {
    const { visual, hotReloadEnabled } = parameters

    const changeHotReload = parameters.onHotReloadChange

    return (
        <div class="panel">
            <div class="panel__section">
                <span class="panel__label">HOT RELOAD</span>
                {visual === null && <VisualConnectingMessage />}
                {visual === undefined && <VisualNotFoundWarning />}
                <Checkbox label="Enable" value={hotReloadEnabled} onValueChange={changeHotReload} disabled={!visual} />
                {hotReloadEnabled && <PrecautionMessage />}
            </div>
        </div>
    )
}

function VisualConnectingMessage() {
    return <p class="warning">Connecting to visual...</p>
}

function VisualNotFoundWarning() {
    return (
        <p class="warning">
            Could not connect to visual, you may still (hope so) use visual editor without hot reload. Do report this!
        </p>
    )
}

function PrecautionMessage() {
    return (
        <>
            <p class="warning">
                <b>HEADS UP! You may LOOSE your configuration if you don't read this.</b>
                <br /> Make sure to save your configuration <b>first</b> using the <b>left</b> save button (below the
                sidebar), <i>then</i> using the save button provided by Home Assistant. If you forget to follow the
                order, you will need to recover the configuration from history tab. Hot reload relies on a system where
                updates are passed directly to visual instead of going throw Home Assistant, Hence you need to save it
                in the above order.
            </p>
            <Graphic />
        </>
    )
}

function Graphic() {
    return (
        <svg xmlns="http://www.w3.org/2000/svg" width="216" height="136" viewBox="0 0 216 136" class="icon">
            <path d="M210.073 119.544C210.624 119.514 211.096 119.938 211.126 120.489C211.156 121.041 210.733 121.512 210.182 121.542L210.128 120.543C210.178 121.464 210.182 121.536 210.182 121.541L210.18 121.542L210.155 121.543C210.138 121.544 210.113 121.545 210.081 121.547C210.017 121.55 209.923 121.554 209.8 121.558C209.554 121.568 209.193 121.58 208.731 121.589C207.805 121.609 206.468 121.619 204.816 121.586C201.513 121.518 196.94 121.272 191.863 120.558C181.755 119.136 169.451 115.832 161.265 108.199C149.512 97.2401 144.586 87.0352 143.744 78.754C134.119 77.2967 123.156 72.532 114.443 63.352C103.62 51.9471 95.5423 31.3227 94.6759 14.1554C94.6483 13.604 95.0735 13.1341 95.625 13.1062C96.1764 13.0786 96.6463 13.5038 96.6741 14.0552C97.5203 30.8199 105.447 50.9674 115.893 61.9753C124.154 70.6801 134.514 75.2406 143.615 76.7095C143.54 73.3236 144.165 70.3044 145.277 67.7423C147.234 63.2389 150.707 60.1839 154.445 59.2346C158.237 58.2716 162.19 59.5153 164.824 63.379C166.279 65.5128 166.994 67.5707 166.977 69.4969C166.96 71.4408 166.197 73.1477 164.888 74.5491C162.316 77.3025 157.654 78.8819 152.154 79.1922C150.154 79.3051 148.017 79.2505 145.791 79.0168C146.704 86.6279 151.333 96.2039 162.629 106.736C170.35 113.937 182.138 117.17 192.143 118.578C197.122 119.278 201.612 119.52 204.857 119.586C206.479 119.619 207.788 119.609 208.689 119.59C209.14 119.58 209.488 119.569 209.723 119.56C209.84 119.556 209.929 119.552 209.988 119.549C210.018 119.547 210.04 119.547 210.054 119.546C210.061 119.546 210.067 119.545 210.07 119.545C210.071 119.545 210.072 119.544 210.073 119.544ZM164.977 69.4798C164.99 68.0722 164.468 66.4069 163.172 64.5054C161.015 61.3419 157.921 60.4143 154.936 61.1723C151.898 61.9442 148.865 64.502 147.112 68.5387C146.096 70.8763 145.514 73.7235 145.631 76.988C147.883 77.2443 150.038 77.3082 152.041 77.1952C157.328 76.8969 161.368 75.3868 163.425 73.1844C164.431 72.1079 164.965 70.8695 164.977 69.4798Z" />
            <path d="M209.793 121.452C210.345 121.444 210.801 121.883 210.81 122.435C210.818 122.953 210.431 123.386 209.928 123.445L209.826 123.452L209.824 123.451C209.824 123.451 209.822 123.452 209.821 123.452C209.818 123.452 209.814 123.452 209.809 123.452C209.798 123.452 209.781 123.453 209.761 123.453C209.719 123.453 209.657 123.454 209.576 123.455C209.414 123.456 209.177 123.457 208.871 123.458C208.259 123.459 207.373 123.456 206.271 123.439C204.067 123.404 200.999 123.312 197.542 123.085C190.654 122.634 182.12 121.639 175.8 119.443C162.917 114.966 154.866 108.054 150.338 100.422C146.431 93.8388 145.182 86.7787 145.656 80.3999C134.107 78.5473 121.083 73.1394 112.192 63.7713C101.435 52.4368 91.7419 36.6285 94.6831 13.9767C94.7542 13.429 95.2566 13.0426 95.8042 13.1137C96.3517 13.185 96.738 13.6864 96.667 14.2339C93.8304 36.0793 103.128 51.3165 113.642 62.3947C122.154 71.364 134.71 76.5984 145.863 78.4081C145.907 78.0813 145.953 77.7566 146.005 77.4344C147.153 70.3639 150.419 64.3189 154.512 61.2026C156.571 59.6352 158.893 58.7718 161.274 58.9906C163.667 59.2106 165.953 60.5086 167.955 62.9397C170.204 65.6716 171.465 68.1918 171.779 70.4801C172.098 72.8134 171.42 74.8288 169.965 76.4391C168.54 78.0173 166.414 79.1606 163.88 79.9214C161.336 80.6852 158.311 81.0854 155.005 81.1285C152.686 81.1588 150.21 81.011 147.642 80.6848C147.222 86.6601 148.409 93.253 152.058 99.4019C156.309 106.566 163.946 113.207 176.457 117.555C182.506 119.657 190.812 120.639 197.673 121.089C201.089 121.313 204.123 121.404 206.302 121.439C207.391 121.456 208.266 121.459 208.868 121.458C209.169 121.458 209.401 121.456 209.558 121.455C209.636 121.454 209.696 121.453 209.735 121.452C209.755 121.452 209.77 121.453 209.78 121.453C209.784 121.453 209.788 121.452 209.79 121.452L209.793 121.452ZM169.797 70.752C169.553 68.968 168.532 66.786 166.412 64.2104C164.668 62.0924 162.837 61.1431 161.091 60.9825C159.334 60.821 157.497 61.4439 155.724 62.7934C152.154 65.5116 149.07 71.0259 147.978 77.7546C147.928 78.0658 147.884 78.3798 147.842 78.6956C150.332 79.0138 152.732 79.1577 154.979 79.1284C158.151 79.087 160.982 78.7023 163.304 78.0053C165.636 77.3052 167.387 76.3106 168.482 75.0986C169.548 73.9188 170.036 72.4911 169.797 70.752Z" />
            <path d="M187.829 135.886C187.337 136.137 186.735 135.943 186.483 135.451C186.231 134.96 186.426 134.357 186.917 134.105L211.573 121.482L187.705 109.143C187.214 108.89 187.021 108.286 187.275 107.796C187.529 107.305 188.132 107.113 188.623 107.367L215.944 121.491L187.829 135.886Z" />
            <path d="M189.883 132.845C189.381 133.073 188.788 132.85 188.56 132.348C188.331 131.845 188.553 131.251 189.056 131.023L209.717 121.638L183.425 110.633C182.916 110.42 182.675 109.834 182.888 109.325C183.102 108.816 183.688 108.575 184.197 108.788L214.717 121.565L189.883 132.845Z" />
            <path d="M187.764 134.274C187.264 134.51 186.668 134.298 186.432 133.798C186.196 133.299 186.409 132.703 186.909 132.466L209.823 121.627L186.528 111.234C186.024 111.009 185.797 110.418 186.022 109.914C186.247 109.41 186.839 109.184 187.343 109.409L214.612 121.575L187.764 134.274Z" />
            <path d="M56.7533 68.7309C57.2525 68.9667 57.4666 69.5622 57.2311 70.0615C56.9953 70.5608 56.399 70.7749 55.8996 70.5392C31.75 59.135 16.9602 34.142 10.3001 10.9515C10.1478 10.4208 10.454 9.8669 10.9848 9.71444C11.5156 9.56199 12.0693 9.86928 12.2217 10.4001C18.7977 33.2972 33.3266 57.6682 56.7533 68.7309Z" />
            <path d="M56.7533 68.7308C57.2527 68.9666 57.4668 69.5629 57.231 70.0623C56.9951 70.5617 56.399 70.7748 55.8996 70.5391C31.8126 59.1645 16.8389 38.51 10.1541 15.2337C10.0018 14.703 10.3081 14.1491 10.8388 13.9966C11.3696 13.8442 11.9233 14.1515 12.0758 14.6823C18.627 37.4935 33.2641 57.6385 56.7533 68.7308Z" />
            <path d="M32.4564 24.9639L11.2199 9.79582C10.588 9.34444 9.70515 9.75426 9.64203 10.5283L7.50993 36.674C7.43814 37.5543 8.46578 38.0901 9.15934 37.5433C18.3745 30.2781 23.8731 28.4509 32.0656 26.7697C32.9256 26.5932 33.1709 25.4742 32.4564 24.9639Z" />
            <path d="M128.179 34.5991C128.147 34.5991 128.123 34.5591 128.107 34.4791C128.059 34.2391 127.923 34.0151 127.699 33.8071C127.491 33.6151 127.227 33.4871 126.907 33.4231C126.507 33.3271 126.019 33.2791 125.443 33.2791C124.755 33.2791 124.011 33.3351 123.211 33.4471C122.411 33.5431 121.635 33.6471 120.883 33.7591C120.147 33.8871 119.507 33.9831 118.963 34.0471C118.867 34.2231 118.659 34.3111 118.339 34.3111C118.275 34.3111 118.211 34.3111 118.147 34.3111C118.099 34.3111 118.035 34.3031 117.955 34.2871C117.827 34.2551 117.731 34.1751 117.667 34.0471C117.603 33.9191 117.555 33.7991 117.523 33.6871C117.475 33.5111 117.451 33.3431 117.451 33.1831C117.451 32.8151 117.627 32.4631 117.979 32.1271C118.683 31.4391 119.299 30.8311 119.827 30.3031C120.355 29.7751 120.835 29.2791 121.267 28.8151C121.699 28.3351 122.107 27.8471 122.491 27.3511C122.891 26.8391 123.307 26.2711 123.739 25.6471C124.171 25.0231 124.651 24.2951 125.179 23.4631C125.499 22.9831 125.771 22.3991 125.995 21.7111C126.219 21.0231 126.331 20.3831 126.331 19.7911C126.331 19.2471 126.211 18.7991 125.971 18.4471C125.747 18.0791 125.331 17.8951 124.723 17.8951H124.603C124.123 17.8951 123.579 18.0551 122.971 18.3751C122.363 18.6951 121.779 19.0951 121.219 19.5751C120.659 20.0551 120.195 20.5511 119.827 21.0631C119.475 21.5751 119.299 22.0231 119.299 22.4071C119.299 22.6471 119.379 22.8471 119.539 23.0071C119.603 23.0711 119.635 23.1271 119.635 23.1751C119.635 23.2231 119.603 23.2471 119.539 23.2471C119.475 23.2471 119.387 23.2151 119.275 23.1511C119.163 23.0871 119.003 22.9271 118.795 22.6711C118.603 22.4151 118.427 22.1351 118.267 21.8311C118.107 21.5271 118.027 21.2711 118.027 21.0631V20.9431C118.091 20.6711 118.299 20.3191 118.651 19.8871C119.019 19.4391 119.443 19.0391 119.923 18.6871C120.691 18.1271 121.443 17.7191 122.179 17.4631C122.931 17.1911 123.635 17.0551 124.291 17.0551C125.075 17.0551 125.763 17.2151 126.355 17.5351C126.963 17.8551 127.435 18.2951 127.771 18.8551C128.123 19.4151 128.299 20.0631 128.299 20.7991C128.299 21.4231 128.147 22.1031 127.843 22.8391C127.555 23.5591 127.083 24.2951 126.427 25.0471C125.643 25.9431 124.835 26.7431 124.003 27.4471C123.171 28.1511 122.355 28.8631 121.555 29.5831C120.755 30.2871 120.003 31.1031 119.299 32.0311C119.203 32.1271 119.139 32.2551 119.107 32.4151C119.587 32.3671 120.123 32.3111 120.715 32.2471C121.307 32.1671 121.907 32.0951 122.515 32.0311C123.123 31.9511 123.675 31.8951 124.171 31.8631C124.683 31.8151 125.083 31.7911 125.371 31.7911H125.779C126.211 31.7911 126.643 31.8151 127.075 31.8631C127.507 31.9111 127.859 32.0391 128.131 32.2471C128.419 32.4551 128.563 32.7991 128.563 33.2791C128.563 33.3431 128.563 33.4071 128.563 33.4711C128.563 33.5191 128.555 33.5751 128.539 33.6391C128.443 34.2791 128.323 34.5991 128.179 34.5991Z" />
            <path d="M30.4569 91.3393C29.9449 91.3393 29.6889 90.5233 29.6889 88.8913C29.6889 88.7953 29.6889 88.6993 29.6889 88.6033C29.7049 88.4913 29.7129 88.3793 29.7129 88.2673C29.7769 86.7473 29.8809 85.2353 30.0249 83.7313C30.1689 82.2273 30.2969 80.7153 30.4089 79.1953C30.4249 78.9553 30.4329 78.7153 30.4329 78.4753C30.4489 78.2353 30.4569 78.0113 30.4569 77.8033C30.0089 78.3473 29.4969 78.8753 28.9209 79.3873C28.3449 79.8993 27.7529 80.2993 27.1449 80.5873C27.1129 80.6033 27.0649 80.6113 27.0009 80.6113C26.8889 80.6113 26.7769 80.5793 26.6649 80.5153C26.5689 80.4513 26.5209 80.3793 26.5209 80.2993C26.5209 80.2193 26.5769 80.1473 26.6889 80.0833C27.0249 79.8753 27.4249 79.5553 27.8889 79.1233C28.3529 78.6753 28.7929 78.1713 29.2089 77.6113C29.6409 77.0513 29.9529 76.5153 30.1449 76.0033C30.0809 75.9233 30.0489 75.8193 30.0489 75.6913C30.0489 75.4833 30.1369 75.3233 30.3129 75.2113C30.5689 75.0353 30.8329 74.8833 31.1049 74.7553C31.3929 74.6113 31.5369 74.5393 31.5369 74.5393C31.7929 74.5393 31.9849 74.6673 32.1129 74.9233C32.2569 75.1633 32.3289 75.4673 32.3289 75.8353C32.3289 75.9313 32.3289 76.0273 32.3289 76.1233C32.3289 76.2193 32.3129 76.3153 32.2809 76.4113C32.1849 76.8753 32.1049 77.3393 32.0409 77.8033C31.9769 78.2673 31.9129 78.7313 31.8489 79.1953C31.7369 80.1073 31.6409 81.1153 31.5609 82.2193C31.4969 83.3073 31.4649 84.3633 31.4649 85.3873C31.4649 86.2993 31.4969 87.1393 31.5609 87.9073C31.6249 88.6593 31.7209 89.2673 31.8489 89.7313C31.9929 90.1793 32.1769 90.4033 32.4009 90.4033C32.4009 90.6113 32.2649 90.7873 31.9929 90.9313C31.7369 91.0593 31.4569 91.1553 31.1529 91.2193C30.8489 91.2993 30.6169 91.3393 30.4569 91.3393Z" />
        </svg>
    )
}
